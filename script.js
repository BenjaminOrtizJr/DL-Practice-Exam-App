let questions = [
    {
        title: '1. WHEN YOU SEE THIS SIGN, YOU MUST:',
        alternatives: [
            'A. Stop completely, check for pedestrians, and cross traffic.',
            'B. Slow down without coming to a complete stop.',
            'C. Stop completely and wait for a green light.',
            'D. Slow down and check for traffic.'
        ],
        correctAnswer: 0,
        questionImage: "/images/stop_sign.PNG"
    },
    {
        title: '2. THIS IS THE SHAPE AND COLOR OF A __________ SIGN.',
        alternatives: [
            'A. Stop',
            'B. Wrong Way',
            'C. Yield',
            'D. Do not enter'
        ],
        correctAnswer: 2,
        questionImage: "/images/yield_sign.PNG"
    },
    {
        title: '3. THIS SIGN MEANS:',
        alternatives: [
            'A. Stop',
            'B. No U-Turn',
            'C. Yield',
            'D. Do not enter'
        ],
        correctAnswer: 3,
        questionImage: "/images/do_not_enter_sign.PNG"
    },
    {
        title: '4. THIS SIGN MEANS:',
        alternatives: [
            'A. No U-Turn',
            'B. No Turning',
            'C. No left turn',
            'D. No right turn'
        ],
        correctAnswer: 0,
        questionImage: "/images/no_uTurn_sign.PNG"
    },
    {
        title: '5. THIS SIGN MEANS:',
        alternatives: [
            'A. No U-Turn',
            'B. No left turn',
            'C. No right turn',
            'D. No turning'
        ],
        correctAnswer: 2,
        questionImage: "/images/no_right_turn.PNG"
    },
    {
        title: '6. THIS SIGN MEANS:',
        alternatives: [
            'A. You must turn left or right',
            'B. You are approaching a T-intersection',
            'C. The road that you are on intersects with a divided highway',
            'D. Designates an overpass above a divided highway'
        ],
        correctAnswer: 2,
        questionImage: "/images/divided_highway_sign.PNG"
    },
    {
        title: '7. YOU NEED TO USE EXTRA CAUTION WHEN DRIVING NEAR A PEDESTRIAN USING A WHITE CANE BECAUSE:',
        alternatives: [
            'A. He or she is deaf',
            'B. He or she has a mental disability',
            'C. He or she is blind',
            'D. He or she has a walking problem'
        ],
        correctAnswer: 2,
        questionImage: ""
    },
    {
        title: '8. WHEN DRIVING NEAR A BLIND PEDESTRIAN WHO IS CARRYING A WHITE CANE OR USING A GUIDE DOG, YOU SHOULD:',
        alternatives: [
            'A. Slow down and be prepared to stop',
            'B. Take the right-of-way',
            'C. Proceed normally',
            'D. Drive away quickly'
        ],
        correctAnswer: 0,
        questionImage: ""
    },
    {
        title: '9. IF THERE ARE NO SIGNALS AT A RAILROAD CROSSING, YOU SHOULD:',
        alternatives: [
            'A. Slow down and prepare to stop if you see or hear a train approaching',
            'B. Proceed as quickly as possible over the tracks',
            'C. Proceed through the crossing at a normal rate',
            'D. Proceed slowly over the tracks'
        ],
        correctAnswer: 0,
        questionImage: "/images/rail_road_crossing.PNG"
    },
    {
        title: '10. YOU MAY DRIVE AROUND THE GATES AT A RAILROAD CROSSING:',
        alternatives: [
            'A. When the train has passed',
            'B. Never',
            'C. When the lights have stopped flashing',
            'D. When other drivers drive around the gates'
        ],
        correctAnswer: 1,
        questionImage: ""
    },
    {
        title: '11. IF YOU SEE THIS SIGN ABOVE YOUR LANE, YOU:',
        alternatives: [
            'A. May not exit the freeway in this lane',
            'B. May continue through the interchange or exit the freeway in this lane',
            'C. May stay in this lane and continue through the interchange',
            'D. Must exit the freeway if you stay in this lane'
        ],
        correctAnswer: 3,
        questionImage: "/images/highway_exit_sign.PNG"
    },
    {
        title: '12. HIGHWAY AND EXPRESSWAY GUIDE SIGNS ARE:',
        alternatives: [
            'A. Orange with black letters',
            'B. Green with white letters',
            'C. Yellow with black letters',
            'D. Red with white letters'
        ],
        correctAnswer: 1,
        questionImage: ""
    },
    {
        title: '13. THIS SIGN IS USED TO WARN DRIVERS ABOUT:',
        alternatives: [
            'A. Upcoming intersections',
            'B. Road construction',
            'C. Road curves ahead',
            'D. Changes in traffic lanes'
        ],
        correctAnswer: 2,
        questionImage: "/images/road_curve_sign.PNG"
    },
    {
        title: '14. THIS SIGN TELLS YOU THAT:',
        alternatives: [
            'A. No turns are allowed on this road',
            'B. The road narrows ahead',
            'C. There are a series of curves ahead',
            'D. The road may be slippery when wet'
        ],
        correctAnswer: 2,
        questionImage: "images/curvy_road_sign.PNG"
    },
    {
        title: '15. THIS SIGN MEANS:',
        alternatives: [
            'A. Left curve ahead',
            'B. Series of curves',
            'C. S curved ahead',
            'D. Slippery when wet'
        ],
        correctAnswer: 3,
        questionImage: "images/slippery_road_sign.PNG"
    },
    {
        title: '16. THIS SIGN INDICATES THAT:',
        alternatives: [
            'A. There is a steep hill ahead',
            'B. No trucks are allowed on the hill',
            'C. A logging road is ahead',
            'D. There are trucks on the hill'
        ],
        correctAnswer: 0,
        questionImage: "images/steep_road_sign.PNG"
    },
    {
        title: '17. A YELLOW AND BLACK DIAMOND-SHAPED SIGN:',
        alternatives: [
            'A. Warns you about conditions on or near the road',
            'B. Helps direct you to cities and towns ahead',
            'C. Tells you about traffic laws and regulations',
            'D. Tells you about road construction ahead'
        ],
        correctAnswer: 0,
        questionImage: "images/road_condition_sign.PNG"
    },
    {
        title: '18. THE SIGN WITH THIS SHAPE AND COLOR IS A _____________ SIGN.',
        alternatives: [
            'A. No passing zone',
            'B. Wrong way',
            'C. Railroad crossing',
            'D. Stop'
        ],
        correctAnswer: 0,
        questionImage: "images/no_passing_zone.PNG"
    },
    {
        title: '19. WHICH OF THESE SIGNS IS USED TO SHOW THE END OF A DIVIDED HIGHWAY?',
        alternatives: [
            'A. 2',
            'B. 4',
            'C. 3',
            'D. 1'
        ],
        correctAnswer: 0,
        questionImage: "images/multiple_signs_1.PNG"
    },
    {
        title: '20. THIS SIGN IS USED TO WARN DRIVERS ABOUT:',
        alternatives: [
            'A. Lane ends, merge left',
            'B. Road curves ahead',
            'C. Upcoming intersections',
            'D. Road construction'
        ],
        correctAnswer: 0,
        questionImage: "images/lane_ends_sign.PNG"
    },
    {
        title: '21. THIS SIGN SHOWS ONE TYPE OF:',
        alternatives: [
            'A. Intersection',
            'B. Road curve',
            'C. Right turn',
            'D. Lane change'
        ],
        correctAnswer: 0,
        questionImage: "images/intersection_sign.PNG"
    },
    {
        title: '22. THIS SIGN SHOWS ONE TYPE OF:',
        alternatives: [
            'A. Right turn',
            'B. Intersection',
            'C. Lane change',
            'D. Road curve'
        ],
        correctAnswer: 1,
        questionImage: "images/intersection_sign_2.PNG"
    },
    {
        title: '23. WHAT SHOULD YOU BE MOST CONCERNED ABOUT WHEN YOU SEE THIS SIGN?',
        alternatives: [
            'A. Driving with your headlights out of alignment because one side of your car is higher than the other',
            'B. Damaging a tire, if you drift onto the shoulder',
            'C. Hydroplaning, if the shoulder has water on it',
            'D. Losing control of your vehicle, if you drift onto the shoulder, because of a drop off'
        ],
        correctAnswer: 3,
        questionImage: "images/lost_control_sign.PNG"
    },
];

let app = {
    start: function () {

        // keep track of the current position in the questions array
        this.currentPosition = 0;
        this.score = 0;
        

        // get alternatives
        let alts = document.querySelectorAll('.alternative');

        alts.forEach((element, index) => {
            element.addEventListener('click', () => {
                // check correct answer
                this.checkAnswer(index);
            });
        });

        // refresh stats/score
        this.updateStats();
        
        // show first question
        this.showQuestion(questions[this.currentPosition]);

        this.restartApp();
    },

    showQuestion: function (q) {

        // show question title
        let titleDiv = document.getElementById('title');
        titleDiv.textContent = q.title;

        // show question image
        let imgDiv = document.getElementById('image-content');
        imgDiv.innerHTML = `<img class="img" src="${q.questionImage}">`;

        // show alternatives
        let alts = document.querySelectorAll('.alternative');
        
        alts.forEach(function (element, index) {
            element.textContent = q.alternatives[index];
        });
    },

    checkAnswer: function (userSelected) {

        let currentQuestion = questions[this.currentPosition];

        if (currentQuestion.correctAnswer == userSelected) {
            // correct
            this.score++;
            this.showResult(true);
        }
        else {
            // not correct
            this.showResult(false);
        }

        // refresh stats/score
        this.updateStats();

        // increase position
        this.increasePosition();

        // show next question
        this.showQuestion(questions[this.currentPosition]);

        
    },

    increasePosition: function () {
        // increase current position
        this.currentPosition++;

        // if reached the end of database
        if (this.currentPosition == questions.length) {
            // Send back to beginning
            this.showScore();
            this.currentPosition = 0;
        }
    },

    updateStats: function () {
        let scoreDiv = document.getElementById('score');
        scoreDiv.textContent = `Your Score: ${this.score}`;
    },

    showResult: function (isCorrect) {
        let resultDiv = document.getElementById('result');
        let result = '';

        // checks
        if (isCorrect) {
            result = 'Correct Answer!';
        }
        else {
            // get the current question
            let currentQuestion = questions[this.currentPosition];

            // get the correct answer (index)
            let correctAnswerIndex = currentQuestion.correctAnswer;

            // get the correct answer (text)
            let correctAnswerText = currentQuestion.alternatives[correctAnswerIndex];

            result = `Incorrect! Correct answer: ${correctAnswerText}`;
        }

        resultDiv.textContent = result;
    },

    showScore: function () {
        let newScore = this.score / questions.length * 100;

       
        let gradeFinal = document.getElementById('test-grade');
        gradeFinal.textContent = `Your final grade is ${parseFloat(newScore).toFixed(1)}%`;
    },

    restartApp: function () {
        let restartBtn = document.getElementById('btn');

        restartBtn.addEventListener('click', () => {
            location.reload();
        });
    }
};

// initialize app
app.start();
